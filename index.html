<!DOCTYPE html><html lang="he">
<head>
  <meta charset="UTF-8">
  <title>מחשבון עלויות שילוח</title>
  <style>
    body {
      direction: rtl;
      font-family: Arial;
      margin: 40px;
      background: #f5f5f5;
    }
    .container {
      max-width: 750px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, label, select {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    input, select {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 10px;
      background: #25a944;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #result, #capacityResult, #singleShippingResult, #reverseCalcResult {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>מחשבון עלות סופית ליחידה + חישוב נפח מכולה</h2><label>בחר סוג מכולה:
  <select id="containerType" onchange="updateContainerVolume()">
    <option value="33.2">20ft - 33.2 CBM</option>
    <option value="67">40ft HQ - 67 CBM</option>
    <option value="76">45ft HQ - 76 CBM</option>
  </select>
</label>

<label>אורך קרטון (ס"מ): <input type="number" id="length" value="109"></label>
<label>רוחב קרטון (ס"מ): <input type="number" id="width" value="76"></label>
<label>גובה קרטון (ס"מ): <input type="number" id="height" value="120"></label>
<label>משקל מוצר אחד (ק"ג): <input type="number" id="productWeight" value="83"></label>

<button onclick="calculateCapacityFromDimensions()">חשב כמה יחידות נכנסות במכולה</button>
<div id="capacityResult"></div>

<hr>

<label>או הזן כמה יחידות נכנסו במכולה בפועל (לדוגמה 56): <input type="number" id="unitsInContainer" value="56"></label>
<button onclick="calculateUnitVolumeFromTotal()">חשב מהו נפח ליחידה</button>
<div id="reverseCalcResult"></div>

<hr>

<label>מחיר מוצר ($): <input type="number" id="productCost" value="500"></label>
<label>כמות יחידות במכולה: <input type="number" id="units" value="56"></label>
<label>עלות מכולה ($): <input type="number" id="containerCost" value="3900"></label>
<label>שחרור ממכס כולל ($): <input type="number" id="customsClearance" value="300"></label>
<label>הובלה למחסן ($): <input type="number" id="localDelivery" value="100"></label>
<label>מע"מ (%): <input type="number" id="vatRate" value="17"></label>

<button onclick="calculateTotal()">חשב עלות סופית ליחידה</button>
<div id="result"></div>

<hr>

<h3>חישוב עלות משלוח לפריט בודד (LCL)</h3>
<label>מחיר מוצר ($): <input type="number" id="singleProductCost" value="500"></label>
<label>עלות שילוח ל-CBM בודד ($): <input type="number" id="lclRate" value="200"></label>
<label>נפח חבילה ב-CBM: <input type="number" id="singleVolume" value="1" step="0.01"></label>
<label>שחרור ממכס לפריט ($): <input type="number" id="singleClearance" value="50"></label>
<label>הובלה פנימית לפריט ($): <input type="number" id="singleDelivery" value="30"></label>
<label>מע"מ (%): <input type="number" id="singleVatRate" value="17"></label>

<button onclick="calculateSingleShipping()">חשב עלות משלוח לפריט בודד</button>
<div id="singleShippingResult"></div>

  </div>  <script>
    function updateContainerVolume() {
      const selected = document.getElementById("containerType").value;
      return parseFloat(selected);
    }

    function calculateCapacityFromDimensions() {
      const volume = updateContainerVolume();
      const length = parseFloat(document.getElementById("length").value) / 100;
      const width = parseFloat(document.getElementById("width").value) / 100;
      const height = parseFloat(document.getElementById("height").value) / 100;

      const productVolume = length * width * height;
      const unitsFit = Math.floor(volume / productVolume);

      document.getElementById("capacityResult").innerText = נפח ליחידה: ${productVolume.toFixed(3)} CBM. נכנסות כ-${unitsFit} יחידות במכולה.;
    }

    function calculateUnitVolumeFromTotal() {
      const volume = updateContainerVolume();
      const units = parseFloat(document.getElementById("unitsInContainer").value);
      if (units > 0) {
        const unitVolume = volume / units;
        document.getElementById("reverseCalcResult").innerText = נפח מוערך לכל יחידה: ${unitVolume.toFixed(3)} CBM;
      } else {
        document.getElementById("reverseCalcResult").innerText = "נא להזין מספר יחידות תקני.";
      }
    }

    function calculateTotal() {
      const productCost = parseFloat(document.getElementById('productCost').value);
      const units = parseInt(document.getElementById('units').value);
      const containerCost = parseFloat(document.getElementById('containerCost').value);
      const customsClearance = parseFloat(document.getElementById('customsClearance').value);
      const localDelivery = parseFloat(document.getElementById('localDelivery').value);
      const vatRate = parseFloat(document.getElementById('vatRate').value) / 100;

      const shippingPerUnit = containerCost / units;
      const customsPerUnit = customsClearance / units;
      const deliveryPerUnit = localDelivery / units;
      const vat = productCost * vatRate;

      const total = productCost + shippingPerUnit + customsPerUnit + deliveryPerUnit + vat;

      document.getElementById('result').innerText = 'עלות סופית ליחידה בישראל: $' + total.toFixed(2);
    }

    function calculateSingleShipping() {
      const productCost = parseFloat(document.getElementById("singleProductCost").value);
      const rate = parseFloat(document.getElementById("lclRate").value);
      const volume = parseFloat(document.getElementById("singleVolume").value);
      const clearance = parseFloat(document.getElementById("singleClearance").value);
      const delivery = parseFloat(document.getElementById("singleDelivery").value);
      const vatRate = parseFloat(document.getElementById("singleVatRate").value) / 100;

      const vat = productCost * vatRate;
      const total = productCost + (rate * volume) + clearance + delivery + vat;
      document.getElementById("singleShippingResult").innerText = עלות כוללת לפריט בודד כולל כל העלויות: $${total.toFixed(2)};
    }
  </script></body>
</html>